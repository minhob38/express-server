# Express Server

ê¸°ë³¸ì ì¸ êµ¬ì¡°ë¥¼ ê°–ì¶˜ express serverì…ë‹ˆë‹¤.

## í™˜ê²½ì„¤ì •

### â€¢ ì„¤ì¹˜

**\- ì €ì¥ì†Œ ë°›ê¸°**  
ë°›ê³ ì‹¶ì€ ê²½ë¡œì— github repositoryë¥¼ cloneí•©ë‹ˆë‹¤.

```sh
$ git clone https://github.com/minhob38/express-server.git [ë°›ì„ ê²½ë¡œ]
```

**\- package ì„¤ì¹˜í•˜ê¸°**  
ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ packageë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```sh
$ npm install
```

### â€¢ ì‹¤í–‰

**\- database ì˜¬ë¦¬ê¸°**  
ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ database(postgresql)ì˜ docker containerë¥¼ ì˜¬ë¦½ë‹ˆë‹¤.

```sh
$ npm run docker:db-up
```

**\- server ì‹¤í–‰í•˜ê¸°**  
ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ express serverë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. (port 8000ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.)

```sh
$ npm start
```

## API

ë³¸ì„œë²„ëŠ” ì¸ì¦ API `api/auth`, ê²Œì‹œíŒ API `api/board`, ì§€ë„ API `api/map`ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

### â€¢ auth api

**\- íšŒì›ê°€ì…**  
**\- ë¡œê·¸ì¸**  
**\- íšŒì›íƒˆí‡´**  
**\- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**

### â€¢ board api

**\- ì „ì²´ ê²Œì‹œê¸€ ì¡°íšŒ**  
**\- íŠ¹ì • ê²Œì‹œê¸€ ì¡°íšŒ**  
**\- ê²Œì‹œê¸€ ìƒì„±**  
**\- ê²Œì‹œê¸€ ìˆ˜ì •**  
**\- ê²Œì‹œê¸€ ì‚­ì œ**

### â€¢ map api

**\- ì„œìš¸ì‹œ ì „ì²´ êµ¬ ì¡°íšŒ**  
**\- ì„œìš¸ì‹œ íŠ¹ì • ê²½ê³„ì•ˆì˜ êµ¬ ì¡°íšŒ**  
**\- ì„œìš¸ì‹œ ë„ˆë¹„ìˆœ êµ¬ ì¡°íšŒ**  
**\- ì„œìš¸ì‹œ íŠ¹ì • êµ¬ ì¡°íšŒ**

<!-- ### â€¢ store api

file ì €ì¥ api -->

### ğŸ“” API Document

api ìš”ì²­/ì‘ë‹µì€ swaggerë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œí™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ğŸ” Logging

winstonìœ¼ë¡œ api ìš”ì²­ë“¤ì„ logging í•©ë‹ˆë‹¤.

## Database

ë³¸ì„œë²„ëŠ” databaseë¡œ postgresql(+postgis)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

## CI / CD

jenkinsë¥¼ ê¸°ë°˜ìœ¼ë¡œ ci/cdê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## Test Code

### â€¢ unit test

jest ê¸°ë°˜ test í™˜ê²½ì…ë‹ˆë‹¤.

### â€¢ integration test

supertest ê¸°ë°˜ test í™˜ê²½ì…ë‹ˆë‹¤.

<!-- ### nodejs server

nodejsëŠ” javascriptë¥¼ ì²˜ë¦¬í•˜ëŠ” eventloopê°€ single threadë¡œ ì‘ë™í•˜ë©°, ë¹„ë™ê¸° i/o ì‘ì—…ì€ libuvì—ì„œ thread poolì— ìˆëŠ” multi threadë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë§ì€ threadë¥¼ ê°€ì§€ì§€ ì•Šê¸°ì— context switchingì´ ì ê³ , threadê°€ ì ì–´ ë©”ëª¨ë¦¬ë¥¼ ëœ ë¨¹ê¸°ë•Œë¬¸ì— cpuì˜ ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆê¸°ì— multi threadì— ë¹„í•´ ì„±ëŠ¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ nodejsëŠ” ê°€ë²¼ìš´ http ìš”ì²­/ì‘ë‹µì„ ì²˜ë¦¬í•¨ê³¼ ë™ì‹œì— ë¬´ê±°ìš´ ë¹„ë™ê¸° i/oë¥¼ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ ë¬´ê±°ìš´ http ìš”ì²­/ì‘ë‹µì´ë¼ë©´ single threadì´ê¸°ì— ì„œë²„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(ë¹„ë™ê¸° i/oê°€ ë§ìœ¼ë©´ multi threadì™€ ë§ˆì°¬ê°€ì§€ë¡œ ëŠë ¤ì§‘ë‹ˆë‹¤.)

multi-thread / single-thread ë¹„êµ

- single core +
  single thread + worker thread (4)
  ìš”ì²­ a, b, c, d
  a, b, c, d (ì²˜ë¦¬ì¤‘)
  e, f, g (ìš”ì²­ì€ ë“¤ì–´ê°)
  -> nodejsëŠ” ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ
  -> nodejsëŠ” ë¹„ë™ê¸° i/oë¥¼ libuvì—ì„œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ì„œë²„ìì²´ ì„±ëŠ¥ì€ ë–¨ì–´ì§€ì§€ ì•ŠìŒ (ì„œë²„ìì²´ëŠ” single threadë¡œ ì´ë²¤íŠ¸ë£¨í”„ê°€ ì‹¤í–‰ì‹œí‚´)
  -> ì¦‰ nodejsëŠ” cpu ì—°ì‚°ì´ ì ì€ ë§ì€ ìš”ì²­ê³¼, ë¹„ë™ê¸° i/oì²˜ë¦¬ê°€ ë§ì„ë•Œ ì¢‹ìŠµë‹ˆë‹¤.

multu thread
ìš”ì²­ a, b, c, d
a, b, c, d (ì²˜ë¦¬ì¤‘)
e, f, g (ëŒ€ê¸°ì¤‘) 


threadëŠ” ì„ì˜ì˜ cpuê°€ ë²ˆê°ˆì•„ì„œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆìŒ. ë”°ë¼ì„œ ì‹±ê¸€ì“°ë ˆë“œë©´ ì½”ì–´ê°€ ë§ì•„ë„ í•˜ë‚˜ì˜ ì½”ì–´ë§Œ ì¼ì„í•¨, í•˜ì§€ë§Œ ë©€í‹°ì“°ë ˆë“œëŠ” ì“°ë ˆë“œê°€ 4ê°œì¼ë•Œ 4ì½”ì–´ì´ë©´ ê°ê° ì½”ì–´ê°€ ì“°ë ˆë“œë¥¼ í•˜ë‚˜ì”© ë§¡ê²Œë¨
-->


